{% extends "base.html" %}

{% block title %} Mocal修改密码 {% endblock %}

{%  block page_content %}
    <form action="{{ url_for('auth.change_password') }}" method="post" onsubmit="return check_submit()">
        <input id="csrf_token" name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
        <div class="form-group">
            <input type="password" class="form-control input-sm" style="width: 30%;margin-left: 30%"
                   name="old_password" placeholder="用户密码" id="old_password">
        </div>
        <div class="form-group">
            <input type="password" class="form-control input-sm" style="width: 30%;margin-left: 30%"
                   name="new_password" placeholder="新密码" id="new_password">
        </div>
        <div class="form-group">
            <input type="password" class="form-control input-sm" style="width: 30%;margin-left: 30%"
                   name="confirm_new_password" placeholder="确认密码" id="confirm_new_password">
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-primary" style="margin-left: 30%">修改</button>
            <button type="reset" class="btn btn-default" style="background-color: #000000;color: white">重置</button>
        </div>
    </form>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
    function check_submit(){
        var old_password = $('#old_password').val();
        if(old_password == ''){
            show_msg('用户密码不能为空！', 1500);
            return false;
        }

        var new_password = $('#new_password').val();
        if(new_password == ''){
            show_msg('新密码不能为空！', 1500);
            return false;
        }

        var confirm_new_password = $('#confirm_new_password').val();
        if(confirm_new_password == ''){
            show_msg('确认密码不能为空！', 1500);
            return false;
        }

        return true;
    }
    </script>
{% endblock %}

{% block styles %}
    {{ super() }}
{% endblock %}